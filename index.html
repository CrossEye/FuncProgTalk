<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=1024, user-scalable=no">

	<title>Functional Programming</title>

	<link rel="stylesheet" href="core/deck.core.css">
	<link rel="stylesheet" href="extensions/goto/deck.goto.css">
	<link rel="stylesheet" href="extensions/menu/deck.menu.css">
	<link rel="stylesheet" href="extensions/navigation/deck.navigation.css">
	<link rel="stylesheet" href="extensions/status/deck.status.css">
	<link rel="stylesheet" href="extensions/hash/deck.hash.css">
	<link rel="stylesheet" href="extensions/scale/deck.scale.css">
    <link rel="stylesheet" href="extensions/codemirror/deck.codemirror.css">
    <link rel="stylesheet" href="extensions/codemirror/themes/default.css">
	<link rel="stylesheet" href="themes/style/swiss.css">
    <style type="text/css">
        .deck-container .slide code {
            color: #c00; font-weight: bold;
        }
    </style>
	<link rel="stylesheet" href="themes/transition/horizontal-slide.css">
	<script src="modernizr.custom.js"></script>
</head>
<body class="deck-container">

<section class="slide">
	<h1>Functional Programming</h1>
    <h2>Scott Sauyet</h2>
</section>

<section class="slide">
	<h2>An Overview of Functional Techniques<br/>
        (for non FP'ers) using Javascript</h2>
    <h3>Agenda</h3>
    <ul>
        <li>What is Functional Programming?</li>
        <li>How Functional Programming Differs From Other Paradigms</li>
        <li>Functional Programming in Javascript</li>
        <li>Advantages and Disadvantages of Functional Style</li>
        <li>Interaction of Functional and Object-Oriented Styles</li>
    </ul>
</section>

<section class="slide">
	<h2>What is Functional Programming?</h2>
    <div class="slide">
        <h3>No Single Definition</h3>
        <p>There is no clear, widely-accepted definition of Functional Programming.  It is a collection of
           related featues which cohere well into a very useful style of programming.</p>
        <ul>
            <li>Some of these features are readily available in Javascript.</li>
            <li>Others can be used if care is taken.</li>
            <li>And some are essentially impossible at the language level.</li>
        </ul>
    </div>
</section>

<section class="slide">
    <h2>Easily available in Javascript</h2>
    <ul>
        <li class="slide">First-class functions</li>
        <li class="slide">Lambdas/Anonymous Functions with closures</li>
        <li class="slide">Compact, even terse, functions</li>
    </ul>
    <h2 class="slide">Possible to accomplish in Javascript with some care</h2>
    <ul>
        <li class="slide">Mostly stateless processing</li>
        <li class="slide">Side-effect-free function calls</li>
    </ul>
</section>

<section class="slide">
    <h2>Not available in current versions Javascript</h2>
    <ul>
        <li class="slide">Performant recursion through tail call optimization</li>
        <li class="slide">Pattern matching (Haskell, Erlang)</li>
        <li class="slide">Lazy Evaluation (Miranda, Haskell)</li>
        <li class="slide">Homoiconicity (mostly LISP-like languages?)</li>
    </ul>
    <div class="slide">
        <hr/>
        <p>We will take a look a brief look at these functional programming features of other languages first, then turn
           our focus to those things we can actually accomplish in Javascript.</p>
    </div>
</section>

<section class="slide">
    <h2>Shared Example</h2>
    <p>Following an example from <a href="http://paulbarry.com/articles/2009/08/30/tail-call-optimization">Paul Barry</a>
       we will use the example of the chances of winning a lottery.  This calculates the odds of choosing the correct
       `n` numbers out of the `p` possibilities.</p>
    <p>Here is an iterative version of the code:</p>
    <div>
        <textarea  class="code" mode="javascript" style="display: none;" runnable="false">function odds(n, p) {
    var acc = 1;
    for(var i = 0; i < n; i++) {
        acc *= (n - i) / (p - i);
    }
    return acc;
}

console.log(odds(3, 10)); //=> (3/10) * (2/9) * (1/8) => (1/120) => 0.008333...</textarea>
    </div>
    <br/>
</section>

<section class="slide">
    <h2>Recursive Version</h2>
    <p>This is similar, but written recursively:</p>
    <div><textarea class="code" mode="javascript" style="display: none;" runnable="false">// Recursive version

function odds(n, p) {
    return (n == 0) ? 1 : (n / p) * odds(n - 1, p - 1);
}</textarea></div>

    <div class="slide">
        <br/>
        <p>There are many reasons that functional programmers prefer recursion, but one very simple one is that
           recursive functions are often much more elegant than their iterative cousins.</p>
    </div>
    <div class="slide">
        <p>Unfortunately, they often don't perform as well.  All the overhead of creating stack contexts for
           function calls tends to add up.  But certain kinds of recursive calls <em>can</em> be easily optimized.</p>
    </div>
</section>

<section class="slide">
    <h2>This code in tail-call formulation:</h2>
    <div><textarea  class="code" mode="javascript" style="display: none;" runnable="false">var odds = (function(){
    var odds1 = function(n, p, acc) {
        return (n == 0) ? acc : odds1(n - 1, p - 1, (n / p) * acc);
    }

    return function(n, p) {
        return odds1(n, p, 1)
    }
})();</textarea></div>
    <div class="slide">
        <br/>
        <p>Note that the recursive call in <code>odds1</code> is the last statement in its branch of the function.
           If this is true for all recursive calls, then the function is <code>tail-recursive</code>, and the
           compiler can replace the entire set of nested calls with simple <code>JUMP</code> operations.</p>
    </div>
    <div class="slide">
        <p>Such optimizations are required by many functional languages.</p>
    </div>
    <div class="slide">
        <p>This is slated to become required in the next version of the specification for Javascript, but it won't
           be consistently available client-side for some time.</p>
    </div>
</section>

<section class="slide">
    <h2>Pattern Matching</h2>
    <p>Some languages make use of an interesting techniqe to define functions: pattern matching.  Rather than use
       <code>if-blocks</code> in the body of the function, parameters are matched to simpler functions.</p>
    <div class="slide">
        <h3>Simple recursive version</h3>
        <div><textarea class="code" mode="erlang" style="display: none;" runnable="false">odds(0, _) -> 1;
odds(N, P) -> (N / P) * odds(N - 1, P - 1).</textarea></div>

    </div>
    <div class="slide">
        <h3>Tail-call version</h3>
        <div><textarea class="code" mode="erlang" style="display: none;" runnable="false">-export([odds/2]).

odds(N, P) -> odds(N, P, 1).
odds(0, _, Acc) -> Acc;
odds(N, P, Acc) -> odds(N - 1, P - 1, (N / P) * Acc).</textarea></div>
    </div>

</section>

<section class="slide">
    <h2>Lazy Evaluation</h2>
    <p>Many of us are most familiar with languages that evaluate their expressions as soon as they're encountered.  But
       there are some that wait until the last possible instant.  This can have some real benefits.</p>
    <div class="slide">
        <p>We'll switch example here, as there's not much call to do lazy evaluation for lottery odds.  We will follow a
           <a href="http://stackoverflow.com/a/284180/1243641">Haskell example</a> from Chris Eidhof</p>
        <div><textarea class="code" mode="haskell" style="display: none;" runnable="false">quickSort [] = []
quickSort (x:xs) = quickSort (filter (< x) xs)
                   ++ [x]
                   ++ quickSort (filter (>= x) xs)

minimum ls = head (quickSort ls)</textarea></div>
        <p>Note that the right half of quicksort is not calculated in finding the minimum.</p>
    </div>
    <p class="slide">One <a href="http://stackoverflow.com/a/2165370/1243641">very interesting comparison</a> is that
       lazy evaluation is to the CPU what garbage collection is to memory.  The garbage collector allows you to pretend
       that you have infinite memory; lazy evaluation allows you to pretend that you have infinite processing power.</p>
</section>

<section class="slide">
    <h2>Homoiconicity</h2>
    <div class="slide">
        <p>No groaning.  At one time you had to learn what <em>polymorphism</em> meant, too!</p>
    </div>
    <div class="slide">
        <h3><em>homoiconicity</em></h3>
        <ul>
            <li><em>homo</em>: from the Greek <em>homo</em>, same</li>
            <li><em>icon</em>: from the Greek <em>eikon</em>, likeness, image, portrait</li>
            <li><em>icity</em>: from the Greek <em>icit</em>, extra letters to make things more pretentious</li>
        </ul>
    </div>
</section>


<a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
<a href="#" class="deck-next-link" title="Next">&#8594;</a>

<p class="deck-status">
	<span class="deck-status-current"></span>
	/
	<span class="deck-status-total"></span>
</p>

<form action="." method="get" class="goto-form">
	<label for="goto-slide">Go to slide:</label>
	<input type="text" name="slidenum" id="goto-slide" list="goto-datalist">
	<datalist id="goto-datalist"></datalist>
	<input type="submit" value="Go">
</form>

<a href="." title="Permalink to this slide" class="deck-permalink">#</a>

<script src="jquery-1.7.2.min.js"></script>
<script src="core/deck.core.js"></script>

<script src="core/deck.core.js"></script>
<script src="extensions/hash/deck.hash.js"></script>
<script src="extensions/menu/deck.menu.js"></script>
<script src="extensions/goto/deck.goto.js"></script>
<script src="extensions/status/deck.status.js"></script>
<script src="extensions/navigation/deck.navigation.js"></script>
<script src="extensions/scale/deck.scale.js"></script>
<script src="extensions/codemirror/codemirror.js"></script>
<script src="extensions/codemirror/mode/javascript/javascript.js"></script>
<script src="extensions/codemirror/mode/erlang/erlang.js"></script>
<script src="extensions/codemirror/deck.codemirror.js"></script>

<script>
	$(function() {
		$.deck('.slide');
	});
</script>
</body>
</html>
